<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Diagroo - Relational diagram to view an IT infrastructure</title>
		
		<!-- CSS -->
		<link type="text/css" rel="stylesheet" href="draw2d_4_3_2/css/contextmenu.css" />
		<link type="text/css" rel="stylesheet" href="src/css/example.css" />
		<link type="text/css" rel="stylesheet" href="src/css/tooltip.css" />
		<link type="text/css" rel="stylesheet" href="src/css/bootstrap.css" />
		<link type="text/css" rel="stylesheet" href="src/css/bootstrap.min.css" />
		<link type="text/css" href="src/css/jquery-ui.min.css" rel="stylesheet">
		
		<!-- JavaScript -->
		<!-- Draw2D Touch -->
        <script src="draw2d_4_3_2/lib/shifty.js"> </script>
        <script src="draw2d_4_3_2/lib/raphael.js"> </script>
        <script src="draw2d_4_3_2/lib/jquery-1.10.2.min.js"> </script>
        <script src="draw2d_4_3_2/lib/jquery.autoresize.js"> </script>
        <script src="draw2d_4_3_2/lib/jquery-touch_punch.js"> </script>
        <script src="draw2d_4_3_2/lib/jquery.contextmenu.js"> </script>
        <script src="draw2d_4_3_2/lib/rgbcolor.js"> </script>
        <script src="draw2d_4_3_2/lib/canvg.js"> </script>
        <script src="draw2d_4_3_2/lib/Class.js"> </script>
        <script src="draw2d_4_3_2/lib/json2.js"> </script>
        <script src="draw2d_4_3_2/lib/pathfinding-browser.min.js"> </script>
		
        <script src="draw2d_4_3_2/src/draw2d.js"></script>
        <script src="draw2d_4_3_2/src/util/Base64.js"> </script>
        <script src="draw2d_4_3_2/src/util/Debug.js"> </script>
        <script src="draw2d_4_3_2/src/util/Color.js"> </script>
        <script src="draw2d_4_3_2/src/util/ArrayList.js"> </script>
        <script src="draw2d_4_3_2/src/util/SVGUtil.js"> </script>
        <script src="draw2d_4_3_2/src/util/UUID.js"> </script>
        <script src="draw2d_4_3_2/src/util/spline/Spline.js"> </script>
        <script src="draw2d_4_3_2/src/util/spline/CubicSpline.js"> </script>
        <script src="draw2d_4_3_2/src/util/spline/CatmullRomSpline.js"> </script>
        <script src="draw2d_4_3_2/src/util/spline/BezierSpline.js"> </script>
        <script src="draw2d_4_3_2/src/geo/PositionConstants.js"> </script>
        <script src="draw2d_4_3_2/src/geo/Point.js"> </script>
        <script src="draw2d_4_3_2/src/geo/Rectangle.js"> </script>
        <script src="draw2d_4_3_2/src/geo/Ray.js"> </script>
        <script src="draw2d_4_3_2/src/command/CommandType.js"> </script>
        <script src="draw2d_4_3_2/src/command/Command.js"> </script>
        <script src="draw2d_4_3_2/src/command/CommandCollection.js"> </script>
        <script src="draw2d_4_3_2/src/command/CommandStack.js"> </script>
        <script src="draw2d_4_3_2/src/command/CommandStackEvent.js"> </script>
        <script src="draw2d_4_3_2/src/command/CommandStackEventListener.js"> </script>
        <script src="draw2d_4_3_2/src/command/CommandMove.js"> </script>
        <script src="draw2d_4_3_2/src/command/CommandMoveLine.js"> </script>
        <script src="draw2d_4_3_2/src/command/CommandMoveVertex.js"> </script>
        <script src="draw2d_4_3_2/src/command/CommandMoveVertices.js"> </script>
        <script src="draw2d_4_3_2/src/command/CommandResize.js"> </script>
        <script src="draw2d_4_3_2/src/command/CommandConnect.js"> </script>
        <script src="draw2d_4_3_2/src/command/CommandReconnect.js"> </script>
        <script src="draw2d_4_3_2/src/command/CommandDelete.js"> </script>
        <script src="draw2d_4_3_2/src/command/CommandAdd.js"> </script>
        <script src="draw2d_4_3_2/src/command/CommandAddVertex.js"> </script>
        <script src="draw2d_4_3_2/src/command/CommandRemoveVertex.js"> </script>
        <script src="draw2d_4_3_2/src/layout/connection/ConnectionRouter.js"> </script>
        <script src="draw2d_4_3_2/src/layout/connection/DirectRouter.js"> </script>
        <script src="draw2d_4_3_2/src/layout/connection/VertexRouter.js"> </script>
        <script src="draw2d_4_3_2/src/layout/connection/ManhattanConnectionRouter.js"> </script>
        <script src="draw2d_4_3_2/src/layout/connection/ManhattanBridgedConnectionRouter.js"> </script>
        <script src="draw2d_4_3_2/src/layout/connection/InteractiveManhattanConnectionRouter.js"> </script>
        <script src="draw2d_4_3_2/src/layout/connection/CircuitConnectionRouter.js"> </script>
        <script src="draw2d_4_3_2/src/layout/connection/SplineConnectionRouter.js"> </script>
        <script src="draw2d_4_3_2/src/layout/connection/FanConnectionRouter.js"> </script>
        <script src="draw2d_4_3_2/src/layout/connection/MazeConnectionRouter.js"> </script>
        <script src="draw2d_4_3_2/src/layout/connection/MuteableManhattanConnectionRouter.js"> </script>
        <script src="draw2d_4_3_2/src/layout/connection/SketchConnectionRouter.js"> </script>
        <script src="draw2d_4_3_2/src/layout/mesh/MeshLayouter.js"> </script>
        <script src="draw2d_4_3_2/src/layout/mesh/ExplodeLayouter.js"> </script>
        <script src="draw2d_4_3_2/src/layout/mesh/ProposedMeshChange.js"> </script>
        <script src="draw2d_4_3_2/src/layout/locator/Locator.js"> </script>
        <script src="draw2d_4_3_2/src/layout/locator/PortLocator.js"> </script>
        <script src="draw2d_4_3_2/src/layout/locator/XYAbsPortLocator.js"> </script>
        <script src="draw2d_4_3_2/src/layout/locator/XYRelPortLocator.js"> </script>
        <script src="draw2d_4_3_2/src/layout/locator/InputPortLocator.js"> </script>
        <script src="draw2d_4_3_2/src/layout/locator/OutputPortLocator.js"> </script>
        <script src="draw2d_4_3_2/src/layout/locator/ConnectionLocator.js"> </script>
        <script src="draw2d_4_3_2/src/layout/locator/ManhattanMidpointLocator.js"> </script>
        <script src="draw2d_4_3_2/src/layout/locator/PolylineMidpointLocator.js"> </script>
        <script src="draw2d_4_3_2/src/layout/locator/TopLocator.js"> </script>
        <script src="draw2d_4_3_2/src/layout/locator/BottomLocator.js"> </script>
        <script src="draw2d_4_3_2/src/layout/locator/LeftLocator.js"> </script>
        <script src="draw2d_4_3_2/src/layout/locator/RightLocator.js"> </script>
        <script src="draw2d_4_3_2/src/layout/locator/CenterLocator.js"> </script>
        <script src="draw2d_4_3_2/src/policy/EditPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/canvas/CanvasPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/canvas/SelectionPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/canvas/SingleSelectionPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/canvas/PanningSelectionPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/canvas/BoundingboxSelectionPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/canvas/ReadOnlySelectionPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/canvas/DecorationPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/canvas/FadeoutDecorationPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/canvas/CoronaDecorationPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/canvas/SnapToEditPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/canvas/SnapToGridEditPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/canvas/ShowGridEditPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/canvas/ShowDotEditPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/canvas/ShowChessboardEditPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/canvas/SnapToGeometryEditPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/figure/DragDropEditPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/figure/RegionEditPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/figure/HorizontalEditPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/figure/VerticalEditPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/figure/SelectionFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/figure/ResizeSelectionFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/figure/RectangleSelectionFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/figure/BigRectangleSelectionFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/figure/RoundRectangleSelectionFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/figure/BusSelectionFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/figure/WidthSelectionFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/figure/VBusSelectionFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/figure/HBusSelectionFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/figure/AntSelectionFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/figure/GlowSelectionFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/figure/SlimSelectionFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/figure/VertexSelectionFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/line/LineSelectionFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/line/VertexSelectionFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/line/OrthogonalSelectionFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/port/PortFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/port/ElasticStrapFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/policy/port/IntrusivePortsFeedbackPolicy.js"> </script>
        <script src="draw2d_4_3_2/src/Configuration.js"> </script>
        <script src="draw2d_4_3_2/src/Canvas.js"> </script>
        <script src="draw2d_4_3_2/src/Selection.js"> </script>
        <script src="draw2d_4_3_2/src/Figure.js"> </script>
        <script src="draw2d_4_3_2/src/shape/node/Node.js"> </script>
        <script src="draw2d_4_3_2/src/VectorFigure.js"> </script>
        <script src="draw2d_4_3_2/src/shape/basic/Rectangle.js"> </script>
        <script src="draw2d_4_3_2/src/SetFigure.js"> </script>
        <script src="draw2d_4_3_2/src/SVGFigure.js"> </script>
        <script src="draw2d_4_3_2/src/shape/node/Hub.js"> </script>
        <script src="draw2d_4_3_2/src/shape/node/HorizontalBus.js"> </script>
        <script src="draw2d_4_3_2/src/shape/node/VerticalBus.js"> </script>
        <script src="draw2d_4_3_2/src/shape/node/Fulcrum.js"> </script>
        <script src="draw2d_4_3_2/src/shape/basic/Oval.js"> </script>
        <script src="draw2d_4_3_2/src/shape/basic/Circle.js"> </script>
        <script src="draw2d_4_3_2/src/shape/basic/Label.js"> </script>
        <script src="draw2d_4_3_2/src/shape/basic/Text.js"> </script>
        <script src="draw2d_4_3_2/src/shape/basic/Line.js"> </script>
        <script src="draw2d_4_3_2/src/shape/basic/PolyLine.js"> </script>
        <script src="draw2d_4_3_2/src/shape/basic/Diamond.js"> </script>
        <script src="draw2d_4_3_2/src/shape/basic/Image.js"> </script>
        <script src="draw2d_4_3_2/src/shape/basic/Polygon.js"> </script>
        <script src="draw2d_4_3_2/src/Connection.js"> </script>
        <script src="draw2d_4_3_2/src/VectorFigure.js"> </script>
        <script src="draw2d_4_3_2/src/ResizeHandle.js"> </script>
        <script src="draw2d_4_3_2/src/shape/basic/LineResizeHandle.js"> </script>
        <script src="draw2d_4_3_2/src/shape/basic/LineStartResizeHandle.js"> </script>
        <script src="draw2d_4_3_2/src/shape/basic/LineEndResizeHandle.js"> </script>
        <script src="draw2d_4_3_2/src/shape/basic/VertexResizeHandle.js"> </script>
        <script src="draw2d_4_3_2/src/shape/basic/GhostVertexResizeHandle.js"> </script>
        <script src="draw2d_4_3_2/src/Port.js"> </script>
        <script src="draw2d_4_3_2/src/InputPort.js"> </script>
        <script src="draw2d_4_3_2/src/OutputPort.js"> </script>
        <script src="draw2d_4_3_2/src/HybridPort.js"> </script>
        <script src="draw2d_4_3_2/src/layout/anchor/ConnectionAnchor.js"> </script>
        <script src="draw2d_4_3_2/src/layout/anchor/ChopboxConnectionAnchor.js"> </script>
        <script src="draw2d_4_3_2/src/layout/anchor/ShortesPathConnectionAnchor.js"> </script>
        <script src="draw2d_4_3_2/src/layout/anchor/CenterEdgeConnectionAnchor.js"> </script>
        <script src="draw2d_4_3_2/src/shape/arrow/CalligrapherArrowLeft.js"> </script>
        <script src="draw2d_4_3_2/src/shape/arrow/CalligrapherArrowDownLeft.js"> </script>
        <script src="draw2d_4_3_2/src/shape/node/Start.js"> </script>
        <script src="draw2d_4_3_2/src/shape/node/End.js"> </script>
        <script src="draw2d_4_3_2/src/shape/node/Between.js"> </script>
        <script src="draw2d_4_3_2/src/shape/note/PostIt.js"> </script>
        <script src="draw2d_4_3_2/src/shape/widget/Widget.js"> </script>
        <script src="draw2d_4_3_2/src/shape/widget/Slider.js"> </script>
        <script src="draw2d_4_3_2/src/shape/diagram/Diagram.js"> </script>
        <script src="draw2d_4_3_2/src/shape/diagram/Pie.js"> </script>
        <script src="draw2d_4_3_2/src/shape/diagram/Sparkline.js"> </script>
        <script src="draw2d_4_3_2/src/shape/analog/OpAmp.js"> </script>
        <script src="draw2d_4_3_2/src/shape/analog/ResistorBridge.js"> </script>
        <script src="draw2d_4_3_2/src/shape/analog/ResistorVertical.js"> </script>
        <script src="draw2d_4_3_2/src/shape/analog/VoltageSupplyHorizontal.js"> </script>
        <script src="draw2d_4_3_2/src/shape/analog/VoltageSupplyVertical.js"> </script>
        <script src="draw2d_4_3_2/src/shape/layout/Layout.js"> </script>
        <script src="draw2d_4_3_2/src/shape/layout/HorizontalLayout.js"> </script>
        <script src="draw2d_4_3_2/src/shape/layout/VerticalLayout.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Icon.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Thunder.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Snow.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Hail.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Rain.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Cloudy.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Sun.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Undo.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Detour.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Merge.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Split.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Fork.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/ForkAlt.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Exchange.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Shuffle.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Refresh.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Ccw.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Acw.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Contract.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Expand.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Stop.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/End.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Start.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Ff.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Rw.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/ArrowRight.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/ArrowLeft.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/ArrowUp.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/ArrowDown.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/ArrowLeft2.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/ArrowRight2.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Smile2.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Smile.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Alarm.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Clock.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/StopWatch.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/History.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Future.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/GlobeAlt2.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/GlobeAlt.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Globe.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Warning.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Code.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Pensil.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Pen.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Plus.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Minus.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/TShirt.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Sticker.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Page2.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Page.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Landscape1.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Landscape2.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Plugin.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Bookmark.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Hammer.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Users.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/User.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Customer.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Employee.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Anonymous.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Skull.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Mail.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Picture.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Bubble.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/CodeTalk.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Talkq.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Talke.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Home.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Lock.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Clip.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Star.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/StarOff.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Star2.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Star2Off.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Star3.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Star3Off.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Chat.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Quote.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Gear2.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Gear.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Wrench.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Wrench2.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Wrench3.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/ScrewDriver.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/HammerAndScrewDriver.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Magic.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Download.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/View.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Noview.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Cloud.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Cloud2.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/CloudDown.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/CloudUp.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Location.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Volume0.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Volume1.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Volume2.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Volume3.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Key.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Ruler.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Power.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Unlock.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Flag.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Tag.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Search.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/ZoomOut.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/ZoomIn.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Cross.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Check.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Settings.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/SettingsAlt.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Feed.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Bug.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Link.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Calendar.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Picker.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/No.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/CommandLine.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Photo.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Printer.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Export.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Import.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Run.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Magnet.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/NoMagnet.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/ReflectH.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/ReflectV.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Resize2.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Rotate.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Connect.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Disconnect.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Folder.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Man.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Woman.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/People.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Parent.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Notebook.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Diagram.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/BarChart.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/PieChart.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/LineChart.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Apps.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Locked.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Ppt.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Lab.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Umbrella.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Dry.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Ipad.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Iphone.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Jigsaw.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Lamp.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Lamp_alt.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Video.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Palm.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Fave.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Help.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Crop.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/BioHazard.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/WheelChair.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Mic.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/MicMute.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/IMac.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Pc.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Cube.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/FullCube.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Font.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Trash.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/NewWindow.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/DockRight.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/DockLeft.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/DockBottom.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/DockTop.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Pallete.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Cart.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Glasses.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Package.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Book.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Books.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Icons.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/List.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Db.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Paper.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/TakeOff.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Landing.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Plane.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Phone.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/HangUp.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/SlideShare.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Twitter.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/TwitterBird.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Skype.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Windows.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Apple.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Linux.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/NodeJs.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/JQuery.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Sencha.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Vim.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/InkScape.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Aumade.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Firefox.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Ie.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Ie9.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Opera.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Chrome.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Safari.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/LinkedIn.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Flickr.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/GitHub.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/GitHubAlt.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Raphael.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/GRaphael.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Svg.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Usb.js"> </script>
        <script src="draw2d_4_3_2/src/shape/icon/Ethernet.js"> </script>
        <script src="draw2d_4_3_2/src/shape/pert/Activity.js"> </script>
        <script src="draw2d_4_3_2/src/shape/state/Start.js"> </script>
        <script src="draw2d_4_3_2/src/shape/state/End.js"> </script>
        <script src="draw2d_4_3_2/src/shape/state/State.js"> </script>
        <script src="draw2d_4_3_2/src/shape/state/Connection.js"> </script>
        <script src="draw2d_4_3_2/src/ui/LabelEditor.js"> </script>
        <script src="draw2d_4_3_2/src/ui/LabelInplaceEditor.js"> </script>
        <script src="draw2d_4_3_2/src/decoration/connection/Decorator.js"> </script>
        <script src="draw2d_4_3_2/src/decoration/connection/ArrowDecorator.js"> </script>
        <script src="draw2d_4_3_2/src/decoration/connection/DiamondDecorator.js"> </script>
        <script src="draw2d_4_3_2/src/decoration/connection/CircleDecorator.js"> </script>
        <script src="draw2d_4_3_2/src/decoration/connection/BarDecorator.js"> </script>
        <script src="draw2d_4_3_2/src/io/Reader.js"> </script>
        <script src="draw2d_4_3_2/src/io/Writer.js"> </script>
        <script src="draw2d_4_3_2/src/io/svg/Writer.js"> </script>
        <script src="draw2d_4_3_2/src/io/png/Writer.js"> </script>
        <script src="draw2d_4_3_2/src/io/json/Writer.js"> </script>
        <script src="draw2d_4_3_2/src/io/json/Reader.js"> </script>
        <script src="draw2d_4_3_2/src/storage/FileStorage.js"> </script>
        <script src="draw2d_4_3_2/src/storage/GoogleDrive.js"> </script>
        <script src="draw2d_4_3_2/src/storage/LocalFileStorage.js"> </script>
        <script src="draw2d_4_3_2/src/storage/TideSDKStorage.js"> </script>
		
		<!-- Javascript for JQuery UI -->
		<script src="src/css/jquery-ui.min.js"></script>
		
		<!-- Javascript for CouchDB -->
		<script type="text/javascript" src="https://diagroo.couchappy.com/_utils/script/json2.js"></script>
		<script type="text/javascript" src="https://diagroo.couchappy.com/_utils/script/jquery.js"></script>
		<script type="text/javascript" src="https://diagroo.couchappy.com/_utils/script/jquery.couch.js"></script>
		
		<!-- JQuery for CouchDB API -->
		<script type="text/javascript">
			var couchDBJQuery = $.noConflict(true);
		</script>
		
		<!-- My JavaScript -->
		<script type="text/javascript" src="src/javascript/Styles.js"></script>
		<script type="text/javascript" src="src/javascript/CustomPort.js"></script>
		<script type="text/javascript" src="src/javascript/Draw2DItem.js"></script>
		<script type="text/javascript" src="src/javascript/Draw2DConnector.js"></script>
		<script type="text/javascript" src="src/javascript/Draw2DConnection.js"></script>
		<script type="text/javascript" src="src/javascript/Model.js"></script>
		<script type="text/javascript" src="src/javascript/Item.js"></script>
		<script type="text/javascript" src="src/javascript/Connector.js"></script>
		<script type="text/javascript" src="src/javascript/Connection.js"></script>
		<script type="text/javascript" src="src/javascript/Layer.js"></script>
		<script type="text/javascript" src="src/javascript/View.js"></script>
		<script type="text/javascript" src="src/javascript/Queries.js"></script>
		<script type="text/javascript" src="src/javascript/Converter.js"></script>
		<script type="text/javascript" src="src/javascript/ItemView.js"></script>
		<script type="text/javascript" src="src/javascript/ConnectorView.js"></script>
		<script type="text/javascript" src="src/javascript/ConnectionView.js"></script>
		
		<!-- Processing JS -->
		<script type="text/javascript" src="processingjs/processing.min.js"></script>
		
		<script type="text/javascript">
		function destroyErrorMessages() {
			$("#errors").remove();
		}
		function displayErrorMessages(values, variables) {
			var errorsArea = $('<div>', {
				id: 'errors'
			});
			
			var nbErrors = 0;
			
			for (var i = 0; i < values.length; i++) {
				switch (values[i]) {
					case null:
						errorsArea.append('<div class="alert alert-danger">ERROR: ' + variables[i] + ' must be not null.</div>');
						nbErrors++;
						break;
					case undefined:
						errorsArea.append('<div class="alert alert-danger">ERROR: ' + variables[i] + ' must be not undefined.</div>');
						nbErrors++;
						break;
					case "":
						errorsArea.append('<div class="alert alert-danger">ERROR: ' + variables[i] + ' must be not empty.</div>');
						nbErrors++;
						break;
					case 0:
						errorsArea.append('<div class="alert alert-danger">ERROR: ' + variables[i] + ' must be not 0.</div>');
						nbErrors++;
						break;
					default:
						break;
				}
			}
			$("#nav").append(errorsArea);
			window.setTimeout(destroyErrorMessages, 5000);
			return !(nbErrors > 0);
		}
		function displayErrorMessage(errorMessage) {
			var errorsArea = $('<div>', {
				id: 'errors'
			});
			errorsArea.append('<div class="alert alert-warning">WARNING: ' + errorMessage + '</div>');
			$("#nav").append(errorsArea);
			window.setTimeout(destroyErrorMessages, 5000);
		}
		
		$(window).load(function() {
			$("#gfx_holder").css('cursor', 'move');
			
			$( "#slider1" ).slider({
				min: 25,
				max: 500,
				values: [200],
				change: function(event, ui) {
					var value = ui.value;
					processingInstance.setSpaceBetweenLayer(value);
					processingInstance.performeGravityCenter();
					$("#spaceBetweenLayerSpan").text(value);
				}
			});
			$( "#slider2" ).slider({
				min: 25,
				max: 200,
				values: [100],
				change: function(event, ui) {
					var value = ui.value;
					processingInstance.setItemHeight(value);
					processingInstance.performeGravityCenter();
					$("#itemHeight").text(value);
				}
			});
			$( "#slider3" ).slider({
				min: 2,
				max: 50,
				values: [12],
				change: function(event, ui) {
					var value = ui.value;
					processingInstance.setFontSize(value);
					$("#textSizeSpan").text(value);
				}
			});

            $("#sketch").bind('mousewheel', function(e){
                e.preventDefault();
                processingInstance.zoom(e.originalEvent.wheelDelta);
            });

			/* globals variables declaration */
			/* var */ converter = new ConverterJSON();
			
			/* var */ items = new draw2d.util.ArrayList(); // Draw2DItem object
			/* var */ // nextItems = new draw2d.util.ArrayList();
			/* var */ connections = new draw2d.util.ArrayList(); // Connection object
			/* var */ // nextConnections = new draw2d.util.ArrayList();
			/* var */ draw2DConnections = new draw2d.util.ArrayList();
			/* var */ // nextDraw2DConnections = new draw2d.util.ArrayList();
			/* var */ canvas = new draw2d.Canvas("gfx_holder");
			
			var nextLayerItems = new draw2d.util.ArrayList();
			var nextLayerConnections = new draw2d.util.ArrayList();
			var nextLayerDraw2DConnections = new draw2d.util.ArrayList();
			
			canvas.installEditPolicy(new draw2d.policy.canvas.CoronaDecorationPolicy());
			canvas.installEditPolicy(new draw2d.policy.canvas.SnapToGridEditPolicy());
			
			itemIsExists = function(item) {
				for (var i = 0; i < items.getSize(); i++) {
					var currentItem = items.get(i);
					if (currentItem.getId() == item.getId()) {
						return currentItem;
					}
				}
				return false;
			};
			
			addItemVGlobal = function(item, itemsList) {
				if (itemIsExists(item)) {
					error("Block already exists !");
				} else {
					itemsList.add(item);
					canvas.addFigure(item, 10, 10);
				}
			};
			
			updateConnectionsList = function(connector) {
				console.assert(connections.getSize() === draw2DConnections.getSize());
				
				switch (connector.type) {
					case "output":
						for (var i = 0; i < connections.getSize(); i++) {
							if (connections.get(i).outputConnectorId == connector.getId()) {
								connections.removeElementAt(i);
								draw2DConnections.removeElementAt(i);
								break;
							}
						}
						break;
					case "input":
						for (var i = 0; i < connections.getSize(); i++) {
							if (connections.get(i).inputConnectorId == connector.getId()) {
								connections.removeElementAt(i);
								draw2DConnections.removeElementAt(i);
								break;
							}
						}
						break;
				}
			};
			
			/* var */ layerMode = false; // variable globale
			
			/* faire mieux ... */
			var clearCanvas = function() {
				for (var i = 0; i < items.getSize(); i++) {
					items.get(i).removeAllConnections();
					canvas.removeFigure(items.get(i));
				}
				items = new draw2d.util.ArrayList();
				connections = new draw2d.util.ArrayList();
				draw2DConnections = new draw2d.util.ArrayList();
				
				for (var i = 0; i < nextLayerItems.getSize(); i++) {
					nextLayerItems.get(i).removeAllConnections();
					canvas.removeFigure(nextLayerItems.get(i));
				}
				nextLayerItems = new draw2d.util.ArrayList();
				nextLayerConnections = new draw2d.util.ArrayList();
				nextLayerDraw2DConnections = new draw2d.util.ArrayList();
				
				canvas.uninstallEditPolicy(new draw2d.policy.canvas.DecorationPolicy());
				canvas.installEditPolicy(new draw2d.policy.canvas.CoronaDecorationPolicy());
				
				layerMode = false;
			};
			
			var policy = new draw2d.policy.canvas.CanvasPolicy();
			var tempFigure = null;
			
			/* pour le mode multiconnection */
			var multipleConnectionMode = false;
			var srcConnector = null;
			var dstConnector = null;
			var xSrc = 0;
			var ySrc = 0;
			var line = new draw2d.shape.basic.Line(0, 0, 0, 0);
			var srcCircle = new draw2d.shape.basic.Circle(12);
			srcCircle.setStroke(0);
			srcCircle.setBackgroundColor("#000");
			var dstCircle = new draw2d.shape.basic.Circle(12);
			dstCircle.setStroke(0);
			dstCircle.setBackgroundColor("#000");
			/* fin */
			
			var oldConnector = null;
			policy.onMouseMove = function(c, x, y, shiftKey, ctrlKey) {
				figure = canvas.getBestFigure(x, y);
				if (figure instanceof draw2d.shape.basic.Label) {
					figure = figure.getParent();
				}
				if (oldConnector == null && figure instanceof Draw2DConnector) {
					oldConnector = figure;
				}
				if (!ctrlKey) oldConnector = null;
				// déplacement d'un connecteur
				if (oldConnector != null && oldConnector instanceof Draw2DConnector && ctrlKey) {
					var parent = oldConnector.getParent();
					var xParent = parent.getX();        var yParent = parent.getY();
					var wParent = parent.getWidth();    var hParent = parent.getHeight();
					var xConnector = oldConnector.getX();     var yConnector = oldConnector.getY();
					var wConnector = oldConnector.getWidth(); var hConnector = oldConnector.getHeight();
					switch (oldConnector.faceIndex) {
						case 0:
							var newXPos = x - xParent;
							if (newXPos >= wConnector / 2 && newXPos <= (wParent - (wConnector / 2))) {
								oldConnector.getLocator().x = newXPos - (wConnector / 2);
							}
							break;
						case 1:
							var newXPos = x - xParent;
							if (newXPos >= wConnector / 2 && newXPos <= (wParent - (wConnector / 2))) {
								oldConnector.getLocator().x = newXPos - (wConnector / 2);
							}
							break;
						case 2:
							var newYPos = y - yParent;
							if (newYPos >= hConnector / 2 && newYPos <= (hParent - (hConnector / 2))) {
								oldConnector.getLocator().y = newYPos - (hConnector / 2);
							}
							break;
						case 3:
							var newYPos = y - yParent;
							if (newYPos >= hConnector / 2 && newYPos <= (hParent - (hConnector / 2))) {
								oldConnector.getLocator().y = newYPos - (hConnector / 2);
							}
							break;
					}
					oldConnector.getParent().repaint();
				}
				// multiple connection mode
				if (figure != null && figure instanceof Draw2DConnector && shiftKey && !multipleConnectionMode) {
					multipleConnectionMode = true;
					xSrc = figure.getAbsoluteX() + (figure.getWidth() / 2);
					ySrc = figure.getAbsoluteY() + (figure.getHeight() / 2);
					srcConnector = figure;
				}
				if (multipleConnectionMode) {
					line.setStartPoint(xSrc, ySrc);
					line.setEndPoint(x, y);
					srcCircle.setCenter(xSrc, ySrc);
					dstCircle.setCenter(x, y);
					if (!line.getCanvas()) {
						canvas.addFigure(line);
						canvas.addFigure(srcCircle);
						canvas.addFigure(dstCircle);
					}
				}
				if (multipleConnectionMode && !shiftKey) {
					multipleConnectionMode = false;
					canvas.removeFigure(line);
					canvas.removeFigure(srcCircle);
					canvas.removeFigure(dstCircle);
					dstConnector = canvas.getBestFigure(x, y);
					if (dstConnector instanceof draw2d.shape.basic.Label) {
						dstConnector = dstConnector.getParent();
					}
					if (dstConnector instanceof Draw2DConnector) {
						if (srcConnector.type === dstConnector.type) {
							console.log("New connection can't be create.");
							return; // on ne créer pas la connection
						}
						var srcPort = null;
						var dstPort = null;
						switch (srcConnector.type) {
							case 'output':
								srcPort = srcConnector.getPorts().get(0);
								dstPort = dstConnector.getPorts().get(0);
								break;
							case 'input':
								srcPort = dstConnector.getPorts().get(0);
								dstPort = srcConnector.getPorts().get(0);
								break;
						}
						var c = new Draw2DConnection();
						c.setSource(srcPort);
						c.setTarget(dstPort);
						c.setTargetDecorator(new draw2d.decoration.connection.ArrowDecorator());
						canvas.addFigure(c);
						var layerId = $("#layersSelect option:selected").val(); // get the current layer selected by the user
						var newConnection = new Connection(c.getId(), dstConnector.getId(), srcConnector.getId(), layerId, c.getText());
						connections.add(newConnection);
						draw2DConnections.add(c);
					}
				}
			};
			var oldX = 0.0;
			var oldY = 0.0;
			policy.onMouseDown = function(c, x, y, shiftKey, ctrlKey) {
				var bestFigure = canvas.getBestFigure(x, y);
				oldX = bestFigure.getX();
				oldY = bestFigure.getY();
			};
			policy.onMouseUp = function(c, x, y, shiftKey, ctrlKey) {
				$.ajaxSetup({async:false});
				var bestFigure = canvas.getBestFigure(x, y);
				if (layerMode && bestFigure != null && bestFigure instanceof Draw2DItem) {
					var upperLayerItem = bestFigure.upperLayerItem;
					if (upperLayerItem != null) {
						var oldFigure = canvas.getBestFigure(oldX, oldY); // Attention si différent de null !
						console.log("UpperLayerItem ID = " + upperLayerItem.getId());
						console.log("CurrentItem ID = " + bestFigure.getId());
					} else {
						// var currentItem = JSON.parse($.get('https://diagroo.couchappy.com/diagroo/' + bestFigure.getId()).responseText);
						var oldFigure = canvas.getBestFigure(oldX, oldY);
						if (oldFigure != null) {
							console.log("vider la liste de = " + oldFigure.getId() + " comme valeu de = " + bestFigure.getId());
						}
					}
				}
			};
			canvas.installEditPolicy(policy);
			/* end globals variables declaration */
			
			var prevView = "";
			
			// Load all models
			getModels($("#modelsSelect"));
			
			/* modelsSelect click event */
			$("#modelsSelect").change(function() {
				var modelId = $("#modelsSelect option:selected").val(); // model id
				if (modelId) {
					getItems(modelId, $("#itemsSelect"));
					getLayers(modelId, $("#layersSelect"));
					getViews(modelId, $("#viewsSelect"));
				}
			});
			/* itemsSelect double click event */
			$("#itemsSelect").dblclick(function() {
				var itemId = $("#itemsSelect option:selected").val(); // item id
				if (itemId) {
					couchDBJQuery.couch.db("diagroo").openDoc(itemId, {
						success: function(data) {
							var itemDraw2D = converter.convertItem(data);
							addItemVGlobal(itemDraw2D, items); // ajouter de façon unique
						},
						error: function(status) {
							console.log(status);
						}
					});
				}
			});
			/* layersSelect double click event */
			$("#layersSelect").dblclick(function() {
				$.ajaxSetup({async:false});
				clearCanvas();
				
				var modelId = $("#modelsSelect option:selected").val();
				var layerId = $("#layersSelect option:selected").val();
				var viewId = $("#viewsSelect option:selected").val();
				
				if (!displayErrorMessages([modelId, layerId, viewId], ['model id', 'layer id', 'view id'])) {
					return;
				}
				
				if (layerId == prevView) {
					layerMode = true;
					prevView = "";
					canvas.uninstallEditPolicy(new draw2d.policy.canvas.CoronaDecorationPolicy());
					canvas.installEditPolicy(new draw2d.policy.canvas.DecorationPolicy());
				} else {
					layerMode = false;
					prevView = layerId;
					canvas.uninstallEditPolicy(new draw2d.policy.canvas.DecorationPolicy());
					canvas.installEditPolicy(new draw2d.policy.canvas.CoronaDecorationPolicy());
				}
				
				switch (layerMode) {
					case true:
							loadView(layerId, viewId, items, connections, draw2DConnections, canvas);
							var currentLayer = JSON.parse($.get('https://diagroo.couchappy.com/diagroo/' + layerId).responseText);
							var nextLayerIndex = currentLayer.index + 1;
							var nextLayers = JSON.parse($.get('https://diagroo.couchappy.com/diagroo/_design/layer/_view/getLayerByIndex', {'key': '["'+modelId+'",'+nextLayerIndex+']'}).responseText).rows;
							for (var i = 0; i < items.getSize(); i++) {
								items.get(i).setLayerStyle();
							}
							for (var i = 0; i < draw2DConnections.getSize(); i++) {
								draw2DConnections.get(i).setLayerStyle();
							}
							if (nextLayers.length != 0) {
								console.log(nextLayers);
								var nextLayer = nextLayers[0].value;
								loadView(nextLayer._id, viewId, nextLayerItems, nextLayerConnections, nextLayerDraw2DConnections, canvas);
							} else {
								displayErrorMessage("There is no lower layer");
							}
						break;
					case false:
						// Méga bricolage !!!
						$("#loadingBox").show();
						setTimeout(function() { loadView(layerId, viewId, items, connections, draw2DConnections, canvas); $("#loadingBox").hide(); }, 10);
						break;
				}
			});
			/* newItemButton click event */
			$("#newItemButton").click(function() {
				var newItem = new Draw2DItem(100, 100, "item");
				addItemVGlobal(newItem, items);
			});
			/* newModelButton click event */
			$("#newModelButton").click(function() {
				var modelName = $("#modelNameInput").val();
				var modelId = couchDBJQuery.couch.newUUID();
				var newModel = new Model(modelId, modelName);
				$("#modelsSelect").append('<option value="'+modelId+'">'+modelName+'</option>');
				save(newModel);
			});
			/* newLayerButton click event */
			$("#newLayerButton").click(function() {
				var modelId = $("#modelsSelect option:selected").val();
				var layerName = $("#layerNameInput").val();
				var layerId = couchDBJQuery.couch.newUUID();
				var params = layerName.split(';');
				if (!displayErrorMessages([layerName, params[0], params[1]], ['layer name', 'layer name', 'layer index'])) {
					return;
				}
				var newLayer = new Layer(layerId, modelId, params[0], parseInt(params[1]));
				$("#layersSelect").append('<option value="'+layerId+'">'+params[0]+'</option>');
				save(newLayer);
			});
			/* newViewButton click event */
			$("#newViewButton").click(function() {
				var modelId = $("#modelsSelect option:selected").val();
				var viewName = $("#viewNameInput").val();
				var viewId = couchDBJQuery.couch.newUUID();
				if (!displayErrorMessages([modelId, viewName], ['model id', 'view name'])) {
					return;
				}
				var newView = new View(viewId, modelId, viewName);
				$("#viewsSelect").append('<option value="'+viewId+'">'+viewName+'</option>');
				save(newView);
			});
			/* saveModelButton click event */
			$("#saveModelButton").click(function() { // save or update an existing model
				var modelId = $("#modelsSelect option:selected").val();
				var layerId = $("#layersSelect option:selected").val();
				if (!displayErrorMessages([modelId, layerId], ['model id', 'layer id'])) {
					return;
				}
				saveUpdateModel(modelId, layerId, items, connections, draw2DConnections);
			});
			/* saveViewButton click event */
			$("#saveViewButton").click(function() { // save or update an existing view
				// ***View référence un objet Layer
				// ***View référence un objet View
				var layerId = $("#layersSelect option:selected").val();
				var viewId = $("#viewsSelect option:selected").val();
				if (!displayErrorMessages([layerId, viewId], ['layer id', 'view id'])) {
					return;
				}
				if (layerMode) {
					saveUpdateView(layerId, viewId, items, connections);
				} else {
					saveUpdateView(layerId, viewId, items, connections);
				}
			});
			/* clearButton click event */
			$("#clearButton").click(function() {
				clearCanvas();
			});
			/* resetButton click event */
			$("#resetButton").click(function() {
				couchDBJQuery.couch.db("diagroo").allDocs({
					success: function(data) {
						for (var i = 0; i < data.rows.length; i++) {
							var currentDoc = data.rows[i];
							var idDoc = currentDoc.id;
							var revDoc = currentDoc.value.rev;
							switch (idDoc) {
								case "_design/connection":
									break;
								case "_design/connector":
									break;
								case "_design/model":
									break;
								case "_design/view":
									break;
								case "_design/layer":
									break;
								default:
									var docToDelete = {
										_id: idDoc,
										_rev: revDoc
									};
									couchDBJQuery.couch.db("diagroo").removeDoc(docToDelete, {
										success: function(data) {
										},
										error: function(status) {
										}
									});
									break;
							}
						}
					}
				});
			});
			$("#to3DButton").click(function() {
				var documentWidth = $(document).width();
				var documentHeight = $(document).height();
				var area = $("#area");
				var canvas = $("#area canvas");
				var titleText = $("#titleText");
				var w = documentWidth - 100;
				var h = documentHeight - 100;
				var left = 50;
				var top = 50;
				area.css('display', 'block');
				area.css('width', w);
				area.css('height', h);
				area.css('left', left);
				area.css('top', top);
				canvas.css('width', w);
				canvas.css('height', h - 60);
				titleText.text($("#modelsSelect option:selected").text() + " - " + $("#viewsSelect option:selected").text());
				startSketch();
			});
			$("#closeButton").click(function() {
				stopSketch();
				
				var area = $("#area");
				area.css('display', 'none');
			});
			$("#saveButton").click(function() {
				Processing.getInstanceById('sketch').save('test.png');
			});;
		});
		</script>
		<!-- GUI + CouchDB calls -->
		<script type="text/javascript" src="src/javascript/SaveUpdateModelGUI.js"></script>
		<script type="text/javascript" src="src/javascript/GetModelsAndItemsGUI.js"></script>
		<script type="text/javascript" src="src/javascript/ContextMenuItemGUI.js"></script>
		<script type="text/javascript" src="src/javascript/SaveUpdateViewGUI.js"></script>
		<script type="text/javascript" src="src/javascript/LoadViewGUI.js"></script>
		<script type="text/javascript" src="src/javascript/DeleteItemGUI.js"></script>
		<script type="text/javascript" src="src/javascript/DeleteConnectorGUI.js"></script>
		<script type="text/javascript" src="src/javascript/DeleteConnectionGUI.js"></script>
	</head>
	<body>
		<div class="container-fluid">
		<div class="row">
		<div class="col-md-2">
			<h1>diagroo</h1>
		</div>
		<div class="col-md-10" style="padding: 0;">
		<div id="nav">
			<button id="newItemButton" class="btn btn-primary">New Item</button>
			<button id="newModelButton" class="btn btn-primary">New Model</button>
			<input type="text" id="modelNameInput" value="model name" />
			<button id="newLayerButton" class="btn btn-primary">New Layer</button>
			<input type="text" id="layerNameInput" value="layer name" />
			<button id="newViewButton" class="btn btn-primary">New View</button>
			<input type="text" id="viewNameInput" value="view name" />
			<button id="saveModelButton" class="btn btn-primary">Save/Update Model</button>
			<button id="saveViewButton" class="btn btn-primary">Save/Update View</button>
			<!-- <button id="clearButton" class="btn btn-primary">Clear</button> -->
			<!-- <button id="resetButton" class="btn btn-primary">Reset</button> -->
			<span id="loadingBox" style="display: none;">Loading ...<img src="src/css/img/ajax-loader.gif" alt="ajax-loader.gif" /></span>
		</div>
		</div>
		</div>
			<div class="row">
				<div class="col-md-1" style="padding: 0 10px 0 10px">
					<!--  multiple="multiple" -->
					<strong>Models</strong>
					<select id="modelsSelect">
						<option value="">No Models</option>
					</select>
					<strong>Views</strong>
					<select id="viewsSelect">
						<option value="">No Views</option>
					</select>
					<button id="to3DButton" class="btn btn-primary">To 3D</button>
					<strong>Layers</strong>
					<select id="layersSelect" multiple="multiple">
						<option value="">No Layers</option>
					</select>
				</div>
				<div class="col-md-1" style="padding: 0 10px 0 10px">
					<strong>Items</strong>
					<select id="itemsSelect" multiple="multiple" style="height: 630px;">
						<option value="">No Items</option>
					</select>
				</div>
				<div onselectstart="javascript:/*IE8 hack*/return false" id="gfx_holder" style="height: 650px; padding: 0" class="col-md-10"></div>
			</div>
		</div>

		<div id="area">
			<div id="title">
				<table>
					<tr>
						<td class="centerCell title"><span id="titleText"></span></td>
						<td class="rightCell"><span>Space Between Layer (<span id="spaceBetweenLayerSpan">200</span> Pixels): </span></td>
						<td><div id="slider1" class="slider"></div></td>
						<td class="rightCell"><span>Item Height (<span id="itemHeight">100</span> Pixels): </span></td>
						<td><div id="slider2" class="slider"></div></td>
						<td class="rightCell"><span>Text Size (<span id="textSizeSpan">12</span> Pixels): </span></span></td>
						<td><div id="slider3" class="slider"></div></td>
						<td class="centerCell">
							<button id="saveButton" class="btn btn-default">Save as Image</button>
							<button id="closeButton" class="btn btn-danger">Close</button>
						</td>
					</tr>
				</table>
			</div>
			<canvas id="sketch" data-processing-sources="controlling.pde"></canvas>
		</div>
		
		<script type="application/javascript">
		function progressBar(flag) {
				console.log("progressBar called !");
				if (flag) {
					$("#progressBar").css('display', 'block');
				} else {
					$("#progressBar").css('display', 'none');
				}
			}
		// 3D with Process JS
		var processingInstance;
		function startSketch() {
			switchSketchState(true);
		}
		function stopSketch() {
			switchSketchState(false);
		}
		function switchSketchState(on) {
			if (!processingInstance) {
				processingInstance = Processing.getInstanceById('sketch');
			}
			if (on) {
				var modelId = $("#modelsSelect option:selected").val();
				var viewId = $("#viewsSelect option:selected").val();
				if (!displayErrorMessages([modelId, viewId], ['model id', 'view id'])) {
					return;
				}
				var documentWidth = $(document).width();
				var documentHeight = $(document).height();
				console.log("Document width = " + documentWidth);
				console.log("Document height = " + documentHeight);
				processingInstance.setWidth(documentWidth);
				processingInstance.setHeight(documentHeight); // pas pris en compte
				
				var layersSketch = processingInstance.getLayers();
				layersSketch.clear();
				// fill layers, items and connections
				$.ajaxSetup({async:false});
				// toutes les couches
				var layers = JSON.parse($.get('https://diagroo.couchappy.com/diagroo/_design/layer/_view/getLayersByModel', {'key': '"'+modelId+'"'}).responseText).rows;
				for (var i = 0; i < layers.length; i++) {
					var layer = layers[i]; // layer._id + viewId == getItemsView
					var newLayerSketch = new processingInstance.Layer();
					var itemsSketch = newLayerSketch.getItems();
					var connectionsSketch = new newLayerSketch.getConnections();
					var itemsView = JSON.parse($.get('https://diagroo.couchappy.com/diagroo/_design/view/_view/getItemsView', {'key': '["'+layer.id+'","'+viewId+'"]'}).responseText).rows;
					for (var j = 0; j < itemsView.length; j++) {
						var itemView = itemsView[j].value;
						var item = JSON.parse($.get('https://diagroo.couchappy.com/diagroo/' + itemView.itemId).responseText);
						itemsSketch.add(new processingInstance.Item(itemView.x, itemView.y, itemView.width, itemView.height, item.text));
					}
					var connectionsView = JSON.parse($.get('https://diagroo.couchappy.com/diagroo/_design/view/_view/getConnectionsView', {'key': '["'+layer.id+'","'+viewId+'"]'}).responseText).rows;
					for (var j = 0; j < connectionsView.length; j++) {
						var connectionView = connectionsView[j].value;
						var connection = JSON.parse($.get('https://diagroo.couchappy.com/diagroo/' + connectionView.connectionId).responseText);
						var outputConnector = JSON.parse($.get('https://diagroo.couchappy.com/diagroo/' + connection.outputConnectorId).responseText);
						var inputConnector = JSON.parse($.get('https://diagroo.couchappy.com/diagroo/' + connection.inputConnectorId).responseText);
						console.log(connectionView);
						var posSketch = new processingInstance.ArrayList();
						for (var k = 0; k < connectionView.vertices.length; k++) {
							var p = connectionView.vertices[k];
							console.log(p);
							posSketch.add(new processingInstance.Point(p.x, p.y));
						}
						connectionsSketch.add(new processingInstance.Connection(posSketch, connection.text, outputConnector.text, inputConnector.text));
					}
					layersSketch.add(newLayerSketch);
				}
				processingInstance.performeGravityCenter();
				processingInstance.loop();  // call Processing loop() function
			} else {
				processingInstance.noLoop(); // stop animation, call noLoop()
			}
		}
		// 3D with Processing JS ended
		</script>
	</body>
</html>
